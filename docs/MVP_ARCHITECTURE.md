# HYROX Advance MVP 核心功能架构

## 核心目标
作为HYROX运动员，输入姓名即可：
1. ✅ 获取过往所有参赛成绩
2. ✅ 对比历史成绩变化
3. ✅ 发现可提升点
4. ✅ 制定针对性训练计划

---

## 技术架构优化

### 1. 数据层 - 成绩抓取服务

```
输入姓名 → 搜索官网 → 抓取所有历史比赛 → 存储到本地DB
```

**关键改进：**
- 抓取后本地缓存，避免重复请求
- 支持增量更新（只抓新比赛）
- 失败重试机制

### 2. 分析层 - 历史对比引擎

```
多次比赛数据 → 趋势分析 → 弱项识别 → 进步追踪
```

**核心指标：**
- 总成绩趋势（进步/退步）
- 各项目稳定性（波动分析）
- 弱项优先级（哪项提升空间最大）

### 3. 应用层 - 训练计划生成

```
分析结果 → AI生成计划 → 按优先级排序 → 输出可执行方案
```

---

## 数据库设计（简化版）

```sql
-- 运动员表
athletes: {
  id, name, gender, created_at
}

-- 比赛成绩表
results: {
  id, athlete_id, race_name, race_date, race_location,
  total_time, splits_json, created_at
}

-- 分析记录表
analysis: {
  id, athlete_id, result_id, 
  weaknesses_json, strengths_json, recommendations_json,
  created_at
}
```

---

## MVP功能优先级

### P0 - 必须完美（本周完成）
1. ✅ 姓名输入 → 抓取所有历史成绩
2. ✅ 历史成绩列表展示
3. ✅ 单次比赛分析（弱项/优势）
4. ✅ 基础训练建议

### P1 - 重要（下周完成）
1. 多次比赛对比（趋势图）
2. 弱项优先级排序
3. 8周训练计划生成

### P2 - 增强（后续迭代）
1. 训练打卡追踪
2. 社区排行榜
3. 教练端功能

---

## 关键改进点

### 抓取稳定性
- 添加浏览器池，避免频繁启动
- 抓取失败自动重试3次
- 数据本地缓存，减少官网请求

### 分析准确性
- 基于多次数据计算置信度
- 区分偶然失误和系统性弱项
- 考虑比赛条件（天气、赛道等）

### 训练计划可行性
- 从弱项中选出提升空间最大的3项
- 给出具体训练动作和频次
- 设置可量化的进步目标
